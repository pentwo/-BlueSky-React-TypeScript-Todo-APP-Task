(this["webpackJsonpreact-test"]=this["webpackJsonpreact-test"]||[]).push([[0],{1214:function(e,t,a){"use strict";a.r(t);var n,r=a(0),o=a.n(r),c=a(12),s=a.n(c),i=(a(141),a(16)),l=a(111),u=a(1260),d=a(1262),p=a(1253),m=a(1264),f=a(112),h=a.n(f),E=(a(142),a(6)),v=a(1245),b=a(1266),O=a(1247),j=a(1249),y=a(1267),T=a(1252),g=a(1269),w=a(1263),S=a(1270),x=a(1265),C=a(53),D=a.n(C),N=a(52),R=a.n(N);!function(e){e[e.RefreshTodoList=0]="RefreshTodoList",e[e.RefreshUserList=1]="RefreshUserList",e[e.AddTodo=2]="AddTodo",e[e.EditTodo=3]="EditTodo",e[e.DeleteAndRefreshTodo=4]="DeleteAndRefreshTodo",e[e.ClearTempTodo=5]="ClearTempTodo",e[e.Search=6]="Search",e[e.Update=7]="Update",e[e.Clear=8]="Clear"}(n||(n={}));var k={todos:[],users:[],tempTodo:{id:"",name:"",userId:"",isComplete:!1},search:{name:"",userId:"",isComplete:!1}},_=Object(r.createContext)({state:k,dispatch:function(){}}),I=function(){return Object(r.useContext)(_)},A=Object(v.a)((function(e){return Object(b.a)({Paper:{padding:e.spacing(2),marginBottom:e.spacing(4)},Grid:{marginTop:24,gap:e.spacing(2)},formControl:{minWidth:240,marginBottom:e.spacing(2)},selectEmpty:{marginTop:e.spacing(2)},TextField:{minWidth:360,marginBottom:e.spacing(2)}})}));function F(){var e=A(),t=I(),a=t.state,r=t.dispatch,c=a.search;return t?o.a.createElement(O.a,{className:e.Paper,elevation:4},o.a.createElement("h2",null,"Search"),o.a.createElement(j.a,{className:e.Grid,container:!0,justifyContent:"space-between",alignItems:"center"},o.a.createElement(j.a,{item:!0},o.a.createElement(y.a,{className:e.TextField,label:"Project Name",type:"text",name:"searchInput",variant:"outlined",onChange:function(e){var t=e.target.value;r({type:n.Search,payload:Object(E.a)(Object(E.a)({},c),{},{name:t})})},value:c.name})),o.a.createElement(j.a,{item:!0},o.a.createElement(T.a,{variant:"outlined",className:e.formControl},o.a.createElement(g.a,null,"User"),o.a.createElement(w.a,{label:"User",name:"searchSelect",value:c.userId,onChange:function(e){var t=e.target.value;r({type:n.Search,payload:Object(E.a)(Object(E.a)({},c),{},{userId:t})})}},o.a.createElement(S.a,{value:""},o.a.createElement("em",null,"None")),a.users.map((function(e){return o.a.createElement(S.a,{key:"User-".concat(e.id),value:e.id},"".concat(e.firstName," ").concat(e.lastName))}))))),o.a.createElement(j.a,{item:!0},o.a.createElement("label",{htmlFor:"completed"},"Completed"),o.a.createElement(x.a,{disabled:""===c.name&&""===c.userId,icon:o.a.createElement(R.a,{fontSize:"small"}),checkedIcon:o.a.createElement(D.a,{fontSize:"small"}),checked:c.isComplete,onChange:function(e){r({type:n.Search,payload:Object(E.a)(Object(E.a)({},c),{},{isComplete:e.target.checked})})},name:"completed",color:"primary"})))):null}var H=a(1254),U=a(1255),B=a(1256),L=a(1257),P=a(1258),W=a(1259),z=a(109),M=a.n(z),G=a(110),J=a.n(G),Q=a(74),q=a.n(Q),V=Object(v.a)((function(e){return Object(b.a)({TextField:{minWidth:360,marginBottom:e.spacing(2)},selectEmpty:{marginTop:e.spacing(2)}})}));function $(e){var t=e.label,a=e.inputName,c=(e.editTodo,e.setState),s=V(),l=Object(r.useState)(""),u=Object(i.a)(l,2),d=u[0],p=u[1],m=I(),f=m.state,h=m.dispatch;return Object(r.useEffect)((function(){f.tempTodo&&p(f.tempTodo.name)}),[f.tempTodo]),m?o.a.createElement(y.a,{className:s.TextField,label:t,type:"text",name:a,variant:"outlined",onChange:function(e){var t=e.target.value;p(t),c&&c((function(e){return Object(E.a)(Object(E.a)({},e),{},{name:t})})),f.tempTodo&&h({type:n.EditTodo,payload:Object(E.a)(Object(E.a)({},f.tempTodo),{},{name:t})})},value:d}):null}var K=Object(v.a)((function(e){return Object(b.a)({formControl:{minWidth:240,marginBottom:e.spacing(2)},selectEmpty:{marginTop:e.spacing(2)}})}));function X(e){var t=e.inputName,a=e.setState,c=K(),s=Object(r.useState)(""),l=Object(i.a)(s,2),u=l[0],d=l[1],p=I(),m=p.state,f=p.dispatch;if(Object(r.useEffect)((function(){m.tempTodo&&d(m.tempTodo.userId)}),[m.tempTodo,u]),!p)return null;return o.a.createElement(T.a,{variant:"outlined",className:c.formControl},o.a.createElement(g.a,null,"User"),o.a.createElement(w.a,{label:"User",name:t,value:u,onChange:function(e){var t=e.target.value;d(t),a&&a((function(e){return Object(E.a)(Object(E.a)({},e),{},{user:t})})),m.tempTodo&&f({type:n.EditTodo,payload:Object(E.a)(Object(E.a)({},m.tempTodo),{},{userId:t})})}},m.users.map((function(e){return o.a.createElement(S.a,{key:"User-".concat(e.id),value:e.id},"".concat(e.firstName," ").concat(e.lastName))}))))}var Y=Object(v.a)((function(e){return Object(b.a)({Switch:{},Box:{marginBottom:e.spacing(2),display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}})}));function Z(e){var t=e.checked,a=e.setState,c=Y(),s=Object(r.useState)(!1),l=Object(i.a)(s,2),u=l[0],p=l[1],m=I(),f=m.state,h=m.dispatch;Object(r.useEffect)((function(){p(t)}),[t]),Object(r.useEffect)((function(){f.tempTodo&&p(f.tempTodo.isComplete)}),[f.tempTodo]);return m?o.a.createElement(d.a,{className:c.Box},o.a.createElement("label",{htmlFor:"completed"},"Completed"),o.a.createElement(x.a,{className:c.Switch,icon:o.a.createElement(R.a,{fontSize:"small"}),checkedIcon:o.a.createElement(D.a,{fontSize:"small"}),checked:u,onChange:function(e){p(!u),a&&a((function(e){return Object(E.a)(Object(E.a)({},e),{},{isComplete:!u})})),f.tempTodo&&h({type:n.EditTodo,payload:Object(E.a)(Object(E.a)({},f.tempTodo),{},{isComplete:!u})})},name:"checked",color:"primary"})):null}var ee=Object(v.a)((function(e){return Object(b.a)({paper:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,backgroundColor:e.palette.background.paper,border:"1px solid #333",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}})}));function te(e){var t=e.handleModalClose,a=e.setSearch,r=ee(),c=I(),s=c.state,i=c.dispatch,l=s.tempTodo;return c?o.a.createElement(d.a,{className:r.paper,display:"flex",flexDirection:"column"},o.a.createElement("h2",null,"Edit Task"),o.a.createElement($,{editTodo:s.tempTodo,label:"Project Name",inputName:"editInput"}),o.a.createElement(X,{inputName:"editSelect"}),o.a.createElement(Z,{checked:!1,setState:a}),o.a.createElement(p.a,{variant:"contained",onClick:function(){l&&(i({type:"SAVE_EDIT_TODO_AND_REFRESH_TODO",payload:l}),i({type:n.ClearTempTodo})),t()},startIcon:o.a.createElement(q.a,null)},"Save Edit")):null}var ae=Object(v.a)((function(e){return Object(b.a)({table:{marginBottom:e.spacing(4)},h2:{marginLeft:e.spacing(2)}})}));function ne(){var e=Object(r.useState)(!1),t=Object(i.a)(e,2),a=t[0],c=t[1],s=ae(),l=I(),u=l.state,d=l.dispatch,p=u.todos,f=u.users,h=u.search,E=function(){c(!1),d({type:n.ClearTempTodo})};function v(e){var t,a=null===(t=e.currentTarget.getAttribute("data-edit"))||void 0===t?void 0:t.split("-")[1];c(!0),d({type:"GET_EDIT_AND_REFRESH_TODO",payload:{id:a}})}function b(e){if(window.confirm("Are you sure you want to delete?")){var t,a=null===(t=e.currentTarget.getAttribute("data-delete"))||void 0===t?void 0:t.split("-")[1];a&&d({type:"DELETE_AND_REFRESH_TODO",payload:{id:a}})}}return l?o.a.createElement(o.a.Fragment,null,o.a.createElement(H.a,{className:s.table,component:O.a,elevation:4},o.a.createElement("h2",{className:s.h2},"Task list"),o.a.createElement(U.a,{"aria-label":"todo table"},o.a.createElement(B.a,null,o.a.createElement(L.a,null,o.a.createElement(P.a,null,"Project Name"),o.a.createElement(P.a,{align:"center",width:"20%"},"User"),o.a.createElement(P.a,{align:"center",width:"10%"},"Completed"),o.a.createElement(P.a,{align:"center",width:"5%"},"Actions"))),o.a.createElement(W.a,null,h.name||h.userId?p.filter((function(e){var t=h.name,a=h.userId,n=h.isComplete,r=new RegExp(t,"gi"),o=-1!==e.name.search(r),c=!0;a&&(c=e.user===a);var s=n===e.isComplete;return o&&c&&s})).map((function(e){var t=Object.values(f).filter((function(t){return t.id===e.user}))[0];return o.a.createElement(re,{key:e.id,todo:e,userQuery:t,handleDelete:b,handleEdit:v})})):p.length>0?p.map((function(e){var t=Object.values(f).filter((function(t){return t.id===e.user}))[0];return o.a.createElement(re,{key:e.id,todo:e,userQuery:t,handleDelete:b,handleEdit:v})})):o.a.createElement(o.a.Fragment,null))),o.a.createElement(m.a,{open:a,onClose:E},o.a.createElement(te,{handleModalClose:E})))):null}function re(e){var t=e.todo,a=e.userQuery,n=e.handleDelete,r=e.handleEdit;return o.a.createElement(L.a,{hover:!0},o.a.createElement(P.a,{scope:"row"},t.name),o.a.createElement(P.a,{align:"center"},"".concat(null===a||void 0===a?void 0:a.firstName," ").concat(null===a||void 0===a?void 0:a.lastName)),o.a.createElement(P.a,{align:"center"},t.isComplete?o.a.createElement(D.a,{color:"primary"}):o.a.createElement(R.a,{color:"primary"})),o.a.createElement(P.a,{align:"center"},o.a.createElement(M.a,{"data-delete":"Delete-".concat(t.id),color:"primary",onClick:n}),o.a.createElement(J.a,{"data-edit":"Edit-".concat(t.id),color:"primary",onClick:r})))}var oe=Object(v.a)((function(e){return Object(b.a)({paper:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,backgroundColor:e.palette.background.paper,border:"1px solid #333",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}})}));function ce(e){var t=e.handleModalClose,a=oe(),c=I(),s=c.dispatch,l=Object(r.useState)({name:"",user:"",isComplete:!1}),u=Object(i.a)(l,2),m=u[0],f=u[1];return c?o.a.createElement(d.a,{className:a.paper,display:"flex",flexDirection:"column"},o.a.createElement("h2",null,"Add Task"),o.a.createElement($,{label:"Project Name",setState:f,inputName:"newTodoInput"}),o.a.createElement(X,{setState:f,inputName:"newTodoSelect"}),o.a.createElement(Z,{checked:!1,setState:f}),o.a.createElement(p.a,{disabled:""===m.name||""===m.user,variant:"contained",onClick:function(){s({type:"ADD_AND_REFRESH_TODO",payload:m}),s({type:n.ClearTempTodo}),t()},startIcon:o.a.createElement(q.a,null)},"Save")):null}var se=a(10),ie=a.n(se),le=a(17),ue=a(83),de=a(33),pe=a.n(de);function me(){return fe.apply(this,arguments)}function fe(){return(fe=Object(le.a)(ie.a.mark((function e(){var t,a;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pe.a.get("api/todos").then((function(e){return e.data}));case 3:return t=e.sent,a=t.todos,e.abrupt("return",a);case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function he(e){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(le.a)(ie.a.mark((function e(t){var a,n;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pe.a.get("api/todo/".concat(t)).then((function(e){return e.data}));case 3:return a=e.sent,n=a.todo,e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function ve(e){return be.apply(this,arguments)}function be(){return(be=Object(le.a)(ie.a.mark((function e(t){var a;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pe.a.post("api/todo/create",Object(E.a)({},t)).then((function(e){return e}));case 3:return a=e.sent,e.abrupt("return",a);case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function Oe(e){return je.apply(this,arguments)}function je(){return(je=Object(le.a)(ie.a.mark((function e(t){var a,n,r;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.id,e.next=4,pe.a.patch("api/todo/".concat(a,"/edit"),Object(E.a)({},t)).then((function(e){return e.data}));case 4:return n=e.sent,r=n.todo,e.abrupt("return",r);case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function ye(e){return Te.apply(this,arguments)}function Te(){return(Te=Object(le.a)(ie.a.mark((function e(t){var a;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pe.a.delete("api/todo/".concat(t,"/delete")).then((function(e){return e}));case 3:return a=e.sent,e.abrupt("return",a);case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function ge(){return we.apply(this,arguments)}function we(){return(we=Object(le.a)(ie.a.mark((function e(){var t,a;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pe.a.get("api/users").then((function(e){return e.data}));case 3:return t=e.sent,a=t.users,e.abrupt("return",a);case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function Se(e,t){switch(t.type){case n.RefreshTodoList:return Object(E.a)(Object(E.a)({},e),{},{todos:Object(ue.a)(t.payload)});case n.RefreshUserList:return Object(E.a)(Object(E.a)({},e),{},{users:Object(ue.a)(t.payload)});case n.AddTodo:return Object(E.a)(Object(E.a)({},e),{},{todos:[t.payload].concat(Object(ue.a)(e.todos))});case n.EditTodo:return Object(E.a)(Object(E.a)({},e),{},{tempTodo:Object(E.a)({},t.payload)});case n.ClearTempTodo:return Object(E.a)(Object(E.a)({},e),{},{tempTodo:{id:"",name:"",userId:"",isComplete:!1}});case n.Search:return Object(E.a)(Object(E.a)({},e),{},{search:Object(E.a)({},t.payload)});default:return Object(E.a)({},e)}}var xe={ADD_AND_REFRESH_TODO:function(e){var t=e.dispatch;return function(){var e=Object(le.a)(ie.a.mark((function e(a){var n;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve(a.payload);case 2:200!==(null===(n=e.sent)||void 0===n?void 0:n.status)&&console.error(null===n||void 0===n?void 0:n.statusText),t({type:"REFRESH_TODO"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},GET_EDIT_AND_REFRESH_TODO:function(e){var t=e.dispatch;return function(){var e=Object(le.a)(ie.a.mark((function e(a){var r;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he(a.payload.id);case 2:r=e.sent,t({type:n.EditTodo,payload:r}),t({type:"REFRESH_TODO"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},SAVE_EDIT_TODO_AND_REFRESH_TODO:function(e){var t=e.dispatch;return function(){var e=Object(le.a)(ie.a.mark((function e(a){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe(a.payload);case 2:t({type:"REFRESH_TODO"});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},DELETE_AND_REFRESH_TODO:function(e){var t=e.dispatch;return function(){var e=Object(le.a)(ie.a.mark((function e(a){var n,r;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.payload.id,e.next=3,ye(n);case 3:200!==(null===(r=e.sent)||void 0===r?void 0:r.status)&&console.error(null===r||void 0===r?void 0:r.statusText),t({type:"REFRESH_TODO"});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},REFRESH_TODO:function(e){var t=e.dispatch;return function(){var e=Object(le.a)(ie.a.mark((function e(a){var r;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me();case 2:(r=e.sent).sort((function(e,t){return e.isComplete===t.isComplete?0:e.isComplete?-1:1})),t({type:n.RefreshTodoList,payload:r});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},REFRESH_USER:function(e){var t=e.dispatch;return function(){var e=Object(le.a)(ie.a.mark((function e(a){var r;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge();case 2:r=e.sent,t({type:n.RefreshUserList,payload:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}};var Ce=function(){var e=Object(l.a)(Se,k,xe),t=Object(i.a)(e,2),a=t[0],c=t[1],s=Object(r.useState)(!1),f=Object(i.a)(s,2),E=f[0],v=f[1],b=function(){v(!1),c({type:n.ClearTempTodo})};return Object(r.useEffect)((function(){c({type:"REFRESH_TODO"}),c({type:"REFRESH_USER"})}),[c]),o.a.createElement(_.Provider,{value:{state:a,dispatch:c}},o.a.createElement("div",{className:"App"},o.a.createElement(u.a,{maxWidth:"md"},o.a.createElement(F,null),o.a.createElement(ne,null),o.a.createElement(d.a,{display:"flex",flexDirection:"row-reverse"},o.a.createElement(p.a,{variant:"contained",onClick:function(){v(!0)},startIcon:o.a.createElement(h.a,null)},"Add Task")),o.a.createElement(m.a,{open:E,onClose:b},o.a.createElement(ce,{handleModalClose:b})))))},De=a(1261),Ne=a(123);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Re=a(113),ke=a(27),_e=a(41);new ke.d({serializers:{todo:ke.c.extend({serializeIds:"always"})},models:{todo:ke.b.extend({user:Object(ke.e)()}),user:ke.b.extend({todos:Object(ke.f)()})},factories:{user:ke.a.extend({id:function(e){return Number(e+1)},firstName:function(){return _e.name.firstName()},lastName:function(){return _e.name.lastName()}}),todo:ke.a.extend({name:function(){return _e.random.words(_e.random.number(4)+1)},isComplete:function(){return _e.random.boolean()}})},seeds:function(e){var t,a=e.createList("user",5),n=Object(Re.a)(a);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.createList("todo",_e.random.number(4),{user:r})}}catch(o){n.e(o)}finally{n.f()}},routes:function(){this.namespace="api",this.get("/users",(function(e){return e.users.all()})),this.get("/user/:id/todos",(function(e,t){var a=t.params.id;return{todos:e.todos.where({userID:a})}})),this.get("/todos",(function(e,t){return t.params.active,e.todos.all()})),this.get("/todo/:id",(function(e,t){var a=t.params.id;return{todo:e.todos.find(a)}})),this.delete("/todo/:id/delete",(function(e,t){var a=t.params.id;return e.todos.find(a).destroy(),{success:!0}})),this.patch("/todo/:id/edit",(function(e,t){var a=t.params.id,n=JSON.parse(t.requestBody);return{todo:e.todos.find(a).update(n)}})),this.post("/todo/create",(function(e,t){var a=JSON.parse(t.requestBody),n=e.users.find(a.user);return e.todos.create(Object(E.a)(Object(E.a)({},a),{},{user:n}))}))}});var Ie=(0,Ne.a)({});s.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(De.a,{theme:Ie},o.a.createElement(Ce,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},136:function(e,t,a){e.exports=a(1214)},141:function(e,t,a){},142:function(e,t,a){}},[[136,1,2]]]);
//# sourceMappingURL=main.abe89dde.chunk.js.map